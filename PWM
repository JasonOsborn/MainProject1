`timescale 1ns / 1ps

module PWM(
        input clk,
        input turning,
        input stopped,
        output reg [1:0]Enable
    );
    reg [8:0] counter;
    localparam counter_max = 100;
    reg StopFlag;
    
    initial begin
        counter = 0;
        Enable = 2'b00;
    end
    
    always @(posedge clk) begin
        if (counter >= counter_max) begin
            counter = 0;
        end
        else begin
            counter = counter + 1;
            if (turning) // Turning? 25%
                if (counter > 75)
                    Enable = 2'b11;
            else if (stopped) // Stopped? 0%
                Enable = 2'd0;
            else // None of the above? 100%
                Enable = 2'b11;
        end
    end
    
endmodule
